{
  "type": "object",
  "title": "Endpoint Configuration",
  "required": [
    "tenant_version",
    "endpoint"
  ],
  "properties": {
    "tenant_version": {
      "type": "string",
      "title": "Tenant / Version",
      "description": "Acumatica tenant and API version in format: tenant/version (e.g., Default/25.200.001)",
      "propertyOrder": 1,
      "enum": [],
      "options": {
        "async": {
          "action": "listTenantVersions",
          "label": "Load Tenants & Versions"
        }
      }
    },
    "endpoint": {
      "type": "string",
      "title": "Endpoint Name",
      "description": "Acumatica entity endpoint (e.g., Customer, SalesOrder, Invoice)",
      "propertyOrder": 2,
      "enum": [],
      "options": {
        "async": {
          "action": "listEndpoints",
          "label": "Load Endpoints",
          "watchFor": [
            "tenant_version"
          ]
        }
      }
    },
    "expand": {
      "type": "string",
      "title": "Expand",
      "description": "Related entities to expand (e.g., MainContact, Details)",
      "default": "",
      "propertyOrder": 3
    },
    "filter_expr": {
      "type": "string",
      "title": "Filter",
      "description": "OData filter expression to filter records",
      "default": "",
      "propertyOrder": 4
    },
    "select": {
      "type": "string",
      "title": "Select",
      "description": "OData select expression to choose specific fields",
      "default": "",
      "propertyOrder": 5
    },
    "override_global_page_size": {
      "type": "boolean",
      "format": "checkbox",
      "title": "Override Global Page Size",
      "description": "Enable to use a custom page size for this endpoint instead of the global page size",
      "default": false,
      "propertyOrder": 6
    },
    "row_page_size": {
      "type": "integer",
      "title": "Page Size for Current Endpoint",
      "description": "Number of records to fetch per API request for this specific endpoint",
      "default": 2500,
      "minimum": 1,
      "propertyOrder": 7,
      "options": {
        "dependencies": {
          "override_global_page_size": true
        }
      }
    },
    "destination": {
      "type": "object",
      "title": "Destination",
      "propertyOrder": 8,
      "required": [
        "load_type"
      ],
      "properties": {
        "load_type": {
          "type": "string",
          "format": "select",
          "title": "Load Type",
          "description": "If Full load is used, the destination table will be overwritten every run. If incremental load is used, data will be upserted into the destination table. Tables with a primary key will have rows updated, tables without a primary key will have rows appended.",
          "default": "full_load",
          "propertyOrder": 1,
          "enum": [
            "full_load",
            "incremental_load"
          ],
          "options": {
            "enum_titles": [
              "Full Load",
              "Incremental Load"
            ]
          }
        },
        "primary_keys": {
          "type": "array",
          "format": "select",
          "title": "Primary Keys",
          "description": "Select primary key columns for incremental loads. Use the 'Get Columns' button to load available columns from the endpoint schema.",
          "propertyOrder": 2,
          "enum": [],
          "items": {
            "type": "string"
          },
          "uniqueItems": true,
          "options": {
            "async": {
              "action": "getOutputColumns",
              "label": "Get Columns",
              "watchFor": [
                "tenant_version",
                "endpoint"
              ]
            },
            "tags": true,
            "creatable": true,
            "dependencies": {
              "load_type": "incremental_load"
            }
          }
        }
      }
    }
  }
}